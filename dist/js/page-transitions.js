define("handy/page-transitions/1.0.1/js/page-transitions",["$","handy/base/1.0.0/js/detect"],function(t){function a(t){var a=t.match(/([^/?]+?)(?:\.htm[l]?)?(?:\?.+)?$/i);return a?a[1].toLowerCase():!1}function n(t,n,i,s){t&&("boolean"==typeof n&&(s=i,i=n,n=null),r.ajax({url:t,type:n?"post":"get",data:n,dataType:"html",success:function(n){var d,c=r("<div></div>"),l=n.match(/<title[^>]*>([^<]*)/)&&RegExp.$1;c.get(0).innerHTML=n,d=c.find("[data-role=page]").first().removeClass("ui-page-active").css("transition","0ms").hide().attr("data-url",a(t)),l&&d.data("title",l),r("body").append(d),e(d,i,s),o.onPageload&&o.onPageload(d)}}))}function e(t,a){var n=r(".ui-page-active");if(!n.data("transited")){n.data("transited",!0),t.data("transited",!0),t.data("url"),window.scrollTo(0,1),r("[data-rel=back]",t).data("href",n.data("url"));var e=n.width();n.one(u,function(){r(this).removeClass("ui-page-active").width("100%").css("transition","0ms").css("transform","").removeData("transited").hide()}),t.show().one(u,function(){r(this).addClass("ui-page-active").width("100%").css("transition","0ms").css("transform","").removeData("transited"),window.scrollTo(0,0),i.transitted=!1,o.onTransform&&o.onTransform(r(this),a)}),i.transitted=!0,o.onTransformBegin&&o.onTransformBegin(t,a),n.width(e+"px").css("transform","translateX(0px)"),t.width(e+"px").css("transform",a?"translateX(-"+e+"px)":"translateX("+e+"px)"),setTimeout(function(){n.css("transition","350ms"),t.css("transition","350ms"),n.css("transform",a?"translateX("+e+"px)":"translateX(-"+e+"px)"),t.css("transform","translateX(0px)")},50),document.title=t.data("title")||document.title}}var i,r=t("$"),s=t("handy/base/1.0.0/js/detect"),o={},d=!1,c=s.support.transform&&s.support.transition,l="touchend click",u="webkitTransitionEnd transitionend";return i={init:function(t){c&&(d||(r.extend(o,t),r(document).on(l,"a[data-transition]",function(){var t,i=r(this).attr("href"),s=!(r(this).data("state")===!1),o=a(i);return o&&(t=r('[data-url="'+o+'"]')),t&&t.length?e(t,!1,s):n(i),!1}).on("click touchend","a[data-transition]",function(){return!1}),r(document).on("submit","form[data-transition]",function(){if(!this.onsubmit||this.onsubmit()){var t=r(this).attr("action"),e=!(r(this).data("state")===!1),i=a(t);return i&&r('[data-url="'+i+'"]').remove(),n(t,r(this).serialize(),!1,e),!1}}),r(document).on(l,"[data-rel=back]",function(){var t,i=r(this).attr("href"),s=a(r(this).data("href"));return s&&(t=r('[data-url="'+s+'"]')),t&&t.length?e(t,!0,!0):n(i,!0,!0),!1}).on("click touchend","[data-rel=back]",function(){return!1}),r("[data-role=page]").addClass("ui-page-active").css("transition","0ms").attr("data-url",a(location.href)).data("title",document.title)))},forward:function(t,i){if(c){var s,o=a(t);o&&(s=r('[data-url="'+o+'"]')),s&&s.length?e(s,!1,i):n(t)}else self.location.href=t},backward:function(t){if(c){var i,s=a(t);s&&(i=r('[data-url*="'+s+'"]')),i&&i.length?e(i,!0,!0):n(t,!0,!0)}else self.location.href=t}}});
