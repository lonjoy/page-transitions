define("handy/page-transitions/1.0.1/js/page-transitions",["$","handy/base/1.0.0/js/detect"],function(t){function a(t){var a=t.match(/([^/?]+?)(?:\.htm[l]?)?(?:\?.+)?$/i);return a?a[1].toLowerCase():!1}function n(t,n,e,i){t&&("boolean"==typeof n&&(i=e,e=n,n=null),r.ajax({url:t,type:n?"post":"get",data:n,dataType:"html",success:function(n){var d,c=r("<div></div>"),l=n.match(/<title[^>]*>([^<]*)/)&&RegExp.$1;c.get(0).innerHTML=n,d=c.find("[data-role=page]").first().removeClass("ui-page-active").css("transition","0ms").hide().attr("data-url",a(t)),l&&d.data("title",l),r("body").append(d),s(d,e,i),o.onPageload&&o.onPageload(d)}}))}function s(t,a){var n=r(".ui-page-active");if(!n.data("transited")){n.data("transited",!0),t.data("transited",!0),t.data("url"),window.scrollTo(0,1),r("[data-rel=back]",t).data("href",n.data("url"));var s=n.width();n.one(u,function(){r(this).removeClass("ui-page-active").width("100%").css("transition","0ms").css("transform","").removeData("transited").hide()}),t.show().one(u,function(){r(this).addClass("ui-page-active").width("100%").css("transition","0ms").css("transform","").removeData("transited"),window.scrollTo(0,0),e.transitted=!1,o.onTransform&&o.onTransform(r(this),a)}),e.transitted=!0,o.onTransformBegin&&o.onTransformBegin(t,a),n.width(s+"px").css("transform","translateX(0px)"),t.width(s+"px").css("transform",a?"translateX(-"+s+"px)":"translateX("+s+"px)"),setTimeout(function(){n.css("transition","350ms"),t.css("transition","350ms"),n.css("transform",a?"translateX("+s+"px)":"translateX(-"+s+"px)"),t.css("transform","translateX(0px)")},50),document.title=t.data("title")||document.title}}var e,r=t("$"),i=t("handy/base/1.0.0/js/detect"),o={},d=!1,c=i.support.transform&&i.support.transition,l=i.support.touch?"touchstart":"click",u="webkitTransitionEnd transitionend";return e={init:function(t){c&&(d||(r.extend(o,t),r(document).on(l,"a[data-transition]",function(){var t,e=r(this).attr("href"),i=!(r(this).data("state")===!1),o=a(e);return o&&(t=r('[data-url="'+o+'"]')),t&&t.length?s(t,!1,i):n(e),!1}),r(document).on("submit","form[data-transition]",function(){if(!this.onsubmit||this.onsubmit()){var t=r(this).attr("action"),s=!(r(this).data("state")===!1),e=a(t);return e&&r('[data-url="'+e+'"]').remove(),n(t,r(this).serialize(),!1,s),!1}}),r(document).on(l,"[data-rel=back]",function(){var t,e=r(this).attr("href"),i=a(r(this).data("href"));return i&&(t=r('[data-url="'+i+'"]')),t&&t.length?s(t,!0,!0):n(e,!0,!0),!1}),r("[data-role=page]").addClass("ui-page-active").css("transition","0ms").attr("data-url",a(location.href)).data("title",document.title)))},forward:function(t,e){if(c){var i,o=a(t);o&&(i=r('[data-url="'+o+'"]')),i&&i.length?s(i,!1,e):n(t)}else self.location.href=t},backward:function(t){if(c){var e,i=a(t);i&&(e=r('[data-url*="'+i+'"]')),e&&e.length?s(e,!0,!0):n(t,!0,!0)}else self.location.href=t}}});
