define("handy/page-transitions/1.0.0/js/path",["gallery/zepto/1.0.0/zepto"],function(a){var d=a("gallery/zepto/1.0.0/zepto"),e=d("head"),f=e.children("base"),g={urlParseRE:/^(((([^:\/#\?]+:)?(?:(\/\/)((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/,isSameDomain:function(a,b){return g.parseUrl(a).domain===g.parseUrl(b).domain},isRelativeUrl:function(a){return""===g.parseUrl(a).protocol},isAbsoluteUrl:function(a){return""!==g.parseUrl(a).protocol},parseLocation:function(){return this.parseUrl(this.getLocation())},getLocation:function(a){var b=a?this.parseUrl(a):location,c=this.parseUrl(a||location.href).hash;return c="#"===c?"":c,b.protocol+"//"+b.host+b.pathname+b.search+c},makeUrlAbsolute:function(a,b){if(!g.isRelativeUrl(a))return a;void 0===b&&(b=documentBase);var c=g.parseUrl(a),d=g.parseUrl(b),e=c.protocol||d.protocol,f=c.protocol?c.doubleSlash:c.doubleSlash||d.doubleSlash,h=c.authority||d.authority,i=""!==c.pathname,j=g.makePathAbsolute(c.pathname||d.filename,d.pathname),k=c.search||!i&&d.search||"",l=c.hash;return e+f+h+j+k+l},parseLocation:function(){return this.parseUrl(this.getLocation())},parseUrl:function(a){if("object"==typeof a)return a;var b=g.urlParseRE.exec(a||"")||[];return{href:b[0]||"",hrefNoHash:b[1]||"",hrefNoSearch:b[2]||"",domain:b[3]||"",protocol:b[4]||"",doubleSlash:b[5]||"",authority:b[6]||"",username:b[8]||"",password:b[9]||"",host:b[10]||"",hostname:b[11]||"",port:b[12]||"",pathname:b[13]||"",directory:b[14]||"",filename:b[15]||"",search:b[16]||"",hash:b[17]||""}},isEmbeddedPage:function(a){var b=g.parseUrl(a);return""!==b.protocol?b.hash&&(b.hrefNoHash===this.documentUrl.hrefNoHash||this.documentBaseDiffers&&b.hrefNoHash===this.documentBase.hrefNoHash):/^#/.test(b.href)},convertUrlToDataUrl:function(a){var b=this.parseUrl(a);return this.isEmbeddedPage(b)?b.hash.replace(/^#/,""):this.isSameDomain(b,this.documentBase)?b.hrefNoHash.replace(this.documentBase.domain,""):window.decodeURIComponent(a)}};return g.documentUrl=g.parseLocation(),g.documentBase=f.length?g.parseUrl(g.makeUrlAbsolute(f.attr("href"),g.documentUrl.href)):g.documentUrl,g.documentBaseDiffers=g.documentUrl.hrefNoHash!==g.documentBase.hrefNoHash,g}),define("handy/page-transitions/1.0.0/js/page-transitions",["./path","gallery/zepto/1.0.0/zepto"],function(a){function f(a,b,c){a&&("boolean"==typeof b&&(c=b,b=null),d.ajax({url:a,type:b?"post":"get",data:b,dataType:"html",success:function(b){var j,h=d("<div></div>"),i=b.match(/<title[^>]*>([^<]*)/)&&RegExp.$1;h.get(0).innerHTML=b,j=h.find("[data-role=page]").first().removeClass("ui-page-active").attr("data-url",a),i&&j.data("title",i),d("body").append(j),g(j,c)}}))}function g(a,b){var c=b?"slide reverse":"slide";d(".ui-page-active").one("webkitAnimationEnd animationend",function(){d(this).removeClass(c+" out ui-page-active")}).addClass(c+" out"),a.one("webkitAnimationEnd animationend",function(){a.removeClass(c+" in")}).addClass(c+" in ui-page-active"),document.title=a.data("title")||document.title,window.history.replaceState("","",a.data("url"))}var d=a("gallery/zepto/1.0.0/zepto"),e=a("./path");return{init:function(){d(document).on("click","a[data-transition]",function(){var b=e.convertUrlToDataUrl(this.href),c=d('[data-url="'+b+'"]');return c.length?g(c):f(b),!1}),d(document).on("submit","form[data-transition]",function(){if(!this.onsubmit||this.onsubmit()){var b=e.convertUrlToDataUrl(this.action);return d('[data-url="'+b+'"]').remove(),f(b,d(this).serialize()),!1}}),d(document).on("click","a[data-rel=back]",function(){var a=e.convertUrlToDataUrl(this.href),b=d('[data-url="'+a+'"]');return b.length?g(b,!0):f(a,!0),!1}),d("[data-role=page]").addClass("ui-page-active").attr("data-url",e.convertUrlToDataUrl(location.href)).data("title",document.title)}}});